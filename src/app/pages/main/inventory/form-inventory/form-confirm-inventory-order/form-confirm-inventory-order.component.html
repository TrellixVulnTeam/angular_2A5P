<!-- Scrollable modal -->
<div class="card">
  <div class="card-body font-size-15">
    <h4 class="card-title mb-3 text-uppercase card-border-title">{{ 'FORM.CONFIRM_ORDER' | translate }}</h4>
    <form [formGroup]="form">
      <div class="row">
        <!-- List Product -->
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <table *ngIf="listInventoryOrder.length"
                class="table table-striped table-bordered table-nowrap dt-responsive nowrap no-footer dtr-inline">
                <thead>
                  <tr class="text-center text-overflow text-uppercase font-size-15">
                    <th scope="col">{{ 'TABLE.PRODUCT' | translate }}</th>
                    <th scope="col">{{ 'TABLE.QUANTITY' | translate }}</th>
                    <th scope="col">{{ 'TABLE.NET_VALUE' | translate }}</th>
                    <th scope="col">{{ 'TABLE.SUPPLIER' | translate }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="align-middle h6 font-size-14"
                    *ngFor="let product of form.get('products')['controls'] ; let i=index" [formGroup]='product'>
                    <td class="text-center">
                      {{ getProductName(i) }}
                    </td>
                    <td class="text-center">
                      <input type="number" formControlName="quantity" (ngModelChange)="onChangePrice()"
                        class="form-control" [placeholder]="'PLACEHOLDER.QUANTITY'|translate">
                    </td>
                    <td class="text-center">
                      <input type="number" formControlName="costPrice" (ngModelChange)="onChangePrice()"
                        class="form-control" [placeholder]="'PLACEHOLDER.COST_PRICE'|translate">
                    </td>
                    <td class="text-center">
                      <ng-select formControlName="supplierId" [placeholder]="'SELECTBOX.SUPPLIER' | translate"
                        [clearable]="false">
                        <ng-option *ngFor="let supplier of listSupplier" [value]="supplier.id">
                          {{ supplier.name }}
                        </ng-option>
                      </ng-select>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <!-- Order content detail -->
        <div class="col-12">
          <div class="row">
            <!-- VAT + Fee -->
            <div class="col-8">
              <div class="card">
                <div class="card-body">
                  <!-- VAT -->
                  <div class="row">
                    <div class="col-7">
                      <div class="d-flex align-items-center">
                        <label class="me-2 form-label">{{ 'TABLE.VAT' | translate }}(%)</label>
                        <input type="number" formControlName='VAT' (ngModelChange)="onChangePrice()"
                          class="ms-1 form-control">
                      </div>
                    </div>
                  </div>
                  <!-- Fee -->
                  <div class="row mt-2">
                    <div class="col-12">
                      <div class="scroll-able">
                        <label>{{ 'TABLE.FEE' | translate }}</label>
                        <div formArrayName="fees" *ngFor="let item of form.get('fees')['controls']; let i = index">
                          <div class="row mt-2" [formGroupName]="i">
                            <div class="col-7">
                              <ng-select formControlName="key" [placeholder]="'SELECTBOX.FEE' | translate"
                                [clearable]="false">
                                <ng-option *ngFor="let fee of listFee" [value]="fee">
                                  {{ fee }}
                                </ng-option>
                              </ng-select>
                            </div>
                            <div class="col-5">
                              <div class="flex">
                                <input type="number" formControlName="value"
                                  [placeholder]="'PLACEHOLDER.COST_PRICE'|translate" (ngModelChange)="onChangePrice()"
                                  class="form-control w-75 me-1">
                                <button class="btn btn-danger ms-1" (click)="removeFee(i)">
                                  <b><i class="fas fa-times"></i></b>
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-12 mt-3">
                      <div class="col-6">
                        <button class="btn btn-primary" (click)="addMoreFee()">
                          <i class="fas fa-plus"></i> {{"BUTTON.ADD_MORE"|translate}}
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Total payment -->
            <div class="col-4">
              <div class="card">
                <div class="card-body">
                  <!-- Net price -->
                  <div class="flex-between mt-2">
                    <div>
                      {{'TABLE.NET_PRICE'|translate}}
                    </div>
                    <div>
                      {{ netPrice ||0 }}
                    </div>
                  </div>
                  <!-- VAT -->
                  <div class="flex-between mt-2">
                    <div>
                      {{'TABLE.VAT'|translate}}
                    </div>
                    <div>
                      {{ VATPrice ||0 }}
                    </div>
                  </div>
                  <!-- FEE -->
                  <div class="flex-between mt-2">
                    <div>
                      {{'TABLE.FEE'|translate}}
                    </div>
                    <div>
                      {{ fee ||0 }}
                    </div>
                  </div>
                  <!-- TOTAL -->
                  <div class="flex-between mt-2">
                    <div>
                      {{'TABLE.TOTAL'|translate}}
                    </div>
                    <div>
                      {{total ||0 }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
    <!-- Footer -->
    <div class="d-flex flex-wrap gap-2 justify-content-center mt-3">
      <button type="reset" class="btn btn-danger waves-effect text-uppercase font-w600 btn-shadow" (click)="onCancel()">
        {{ 'BUTTON.CANCEL' | translate }}
      </button>
      <button type="submit" class="btn btn-primary waves-effect waves-light text-uppercase font-w600 btn-shadow"
        (click)="onSubmit()">
        {{ 'BUTTON.SUBMIT' | translate }}
      </button>
    </div>
  </div>
</div>