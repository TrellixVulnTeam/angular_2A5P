<div class="col-12">
  <div class="row mt-2" *ngIf="isListTngPay">
    <div class="col-xl-4 col-lg-6 col-md-6 col-sm-8 col-12 date-range-picker mt-2">
      <div class="flex-between flex-wrap flex-xl-nowrap flex-lg-nowrap flex-md-nowrap flex-sm-nowrap">
        <label class="mb-2 ms-1 mb-xl-0 mb-lg-0 mb-md-0 mb-sm-0 text-overflow wm-140">{{'TABLE.CREATED_DATE' |
          translate }}: </label>
        <input type="text" ngxDaterangepickerMd [timePicker]="true" [timePickerSeconds]="true" [timePicker24Hour]="true"
          [(ngModel)]="selectedCreatedDate" class="form-control text-center"
          [locale]="{ applyLabel: 'OK', format: 'DD/MM/YYYY HH:mm:ss' }" startKey="start" endKey="end"
          [dateLimit]="dateLimit" (rangeClicked)="onFilterCreatedDate($event)"
          (datesUpdated)="onFilterCreatedDate($event)" (choosedDate)="onFilterCreatedDate($event)" />
      </div>
    </div>
    <div class="col-xl-2 col-lg-3 col-md-3 col-sm-6 col-12">
      <ng-select class="mt-2" [(ngModel)]="selectedClub" (ngModelChange)="onChangeClub($event)"
        [placeholder]="'SELECTBOX.CLUB' | translate" [disabled]="isDisableSelected">
        <ng-option *ngFor="let club of listClub" [value]="club.id">
          {{ translate.currentLang === 'en' ? club.nameEn : club.nameVi }}
        </ng-option>
      </ng-select>
    </div>
    <div class="col-xl-2 col-lg-3 col-md-3 col-sm-6 col-12">
      <ng-select class="mt-2" [(ngModel)]="selectedStatus" (ngModelChange)="onChangeStatus($event)"
        [placeholder]="'SELECTBOX.STATUS' | translate">
        <ng-option *ngFor="let status of listStatus" [value]="status">
          {{ status }}
        </ng-option>
      </ng-select>
    </div>
  </div>
</div>
<!-- TNG -->
<div class="row mt-2" *ngIf="!isListTngPay">
  <div class="col-xl-4 col-lg-6 col-md-6 col-sm-12 col-12 date-range-picker mt-2">
    <div class="flex-between flex-wrap flex-xl-nowrap flex-lg-nowrap flex-md-nowrap flex-sm-nowrap">
      <label class="mb-2 ms-1 mb-xl-0 mb-lg-0 mb-md-0 mb-sm-0 text-overflow wm-140">{{'TABLE.NEXT_CHANGE_DATE' |
        translate }}: </label>
      <input type="text" ngxDaterangepickerMd [timePicker]="true" [timePickerSeconds]="true" [timePicker24Hour]="true"
        [(ngModel)]="selectedNextChargeDate" class="form-control text-center"
        [locale]="{ applyLabel: 'OK', format: 'DD/MM/YYYY HH:mm:ss' }" startKey="start" endKey="end"
        [dateLimit]="dateLimit" (rangeClicked)="onFilterNextChargeDate($event)"
        (datesUpdated)="onFilterNextChargeDate($event)" (choosedDate)="onFilterNextChargeDate($event)" />
    </div>
  </div>
  <div class="col-xl-2 col-lg-3 col-md-3 col-sm-6 col-12">
    <ng-select class="mt-2" [(ngModel)]="selectedClub" (ngModelChange)="onChangeClub($event)"
      [placeholder]="'SELECTBOX.CLUB' | translate" [disabled]="isDisableSelected">
      <ng-option *ngFor="let club of listClub" [value]="club.id">
        {{ translate.currentLang === 'en' ? club.nameEn : club.nameVi }}
      </ng-option>
    </ng-select>
  </div>
  <div class="col-xl-2 col-lg-3 col-md-3 col-sm-6 col-12">
    <ng-select class="mt-2" [(ngModel)]="selectedPayment" (ngModelChange)="onChangePayment($event)"
      [placeholder]="'SELECTBOX.PAYMENT_PLAN' | translate">
      <ng-option *ngFor="let payment of listPaymentPlanSubscriptions" [value]="payment.id">
        {{ translate.currentLang === 'en' ? payment.nameEn : payment.nameVi }}
      </ng-option>
    </ng-select>
  </div>
  <div class="col-12 col-md-12 col-sm-12 col-lg-12 col-xl-4">
    <div class="row">
      <!-- Switch Button -->
      <div class="col-xl-3 col-lg-2 col-md-2 col-sm-6 col-4 mt-2 wm-140">
        <div class="form-check form-switch form-switch-lg flex">
          <input class="form-check-input" type="checkbox" id="IsActive" checked [(ngModel)]="isActive"
            (ngModelChange)="onCheckActive($event)">
          <label class="form-check-label" for="IsActive"> {{ isActive ? translate.instant('BUTTON.ACTIVE') :
            translate.instant('BUTTON.INACTIVE')| translate}}</label>
        </div>
      </div>
      <div class="col-sm-4 col-md-4 col-lg-4 col-xl-4 col-8 mt-2 flex">
        <div class=" form-check form-switch form-switch-lg flex me-2">
          <input class="form-check-input" type="checkbox" id="IsSuccess" checked [(ngModel)]="isChangeFail"
            (ngModelChange)="onCheckChangeFail($event)">
          <label class="form-check-label text-overflow" for="IsSuccess"> {{isOpenChangeFailCount ?
            translate.instant('BUTTON.FAIL') :
            translate.instant('BUTTON.SUCCESS') }}</label>
        </div>
        <div *ngIf="isOpenChangeFailCount" class="w-100 ms-1">
          <ng-select class="text-right mt-sm-0 mt-md-0 mt-lg-0 mt-xl-0" [items]="listFailCount" bindLabel="number"
            bindValue="number" [(ngModel)]="selectedFailTotal" (ngModelChange)="onChangeFailTotal($event)"
            [placeholder]="'PLACEHOLDER.CHANGE_FAIL_TOTAL' | translate" [clearable]=false>
          </ng-select>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- table -->
<div class="col-12 h-vh100 mt-4">
  <div class="table-responsive">
    <table class="table table-striped table-bordered table-nowrap dt-responsive nowrap no-footer dtr-inline">
      <thead>
        <tr class="text-center text-overflow text-uppercase font-size-15">
          <th scope="col"></th>
          <th scope="col">{{ 'TABLE.ACCOUNT_ID' | translate }}</th>
          <th scope="col">{{ 'TABLE.FULL_NAME' | translate }}</th>
          <th scope="col">{{ 'TABLE.PHONE' | translate }}</th>
          <th scope="col">{{ 'TABLE.PACKAGE' | translate }}</th>
          <th scope="col">{{ 'TABLE.CREATED_DATE' | translate }}</th>
          <th scope="col">{{ 'TABLE.NEXT_CHANGE_DATE' | translate }}</th>
          <th scope="col">{{ 'TABLE.CHANGE_FAIL_COUNT' | translate }}</th>
          <th scope="col">{{ 'TABLE.CLUB' | translate }}</th>
          <th scope="col">{{ 'TABLE.MANAGE' | translate }}</th>
        </tr>
      </thead>
      <tbody>
        <tr class="align-middle h6 font-size-14" *ngFor="let item of listTngPay">
          <td class="text-center position-relative wm-70"><span [ngClass]="item.classItem"></span></td>
          <td class="text-center">{{ item.accountId }}</td>
          <td class="text-left cursor-pointer" (click)="hyperLinkMemberTng(item.accountId)">{{ item.fullName }}</td>
          <td class="text-center">{{ item.phoneNumber }}</td>
          <td class="text-center">{{ item.paymentPlanName }}</td>
          <td class="text-center">
            <p class="m-0">{{ item.createdAt | date: dayFormat }}</p>
            <p class="m-0 pt-2">{{ item.createdAt | date: timeFormat }}</p>
          </td>
          <td class="text-center">
            <p class="m-0">{{ item.nextChargeDate | date: dayFormat }}</p>
            <p class="m-0 pt-2">{{ item.nextChargeDate | date: timeFormat }}</p>
          </td>
          <td class="text-center">{{ item.chargeFailCount }}</td>
          <td class="text-center">{{ translate.currentLang === 'en' ? item.clubNameEn :item.clubNameEn }}
          </td>
          <td class="text-center">
            <button type="button" class="btn btn-primary btn-sm btn-only-shadow"
              [ngbTooltip]="'BUTTON.VIEW' | translate" (click)="viewDetailSubscriptions(item.id)">
              <i class="fas fa-eye"></i></button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="text-center pagination-footer flex-wrap pagination-rounded">
    <div class="paging-limit mt-3">
      <ng-select [clearable]="false" [(ngModel)]="pageSize" (change)="getListSubscriptions()">
        <ng-option [value]="10">10</ng-option>
        <ng-option [value]="20">20</ng-option>
        <ng-option [value]="50">50</ng-option>
      </ng-select>
    </div>
    <div class="paging-nav h6">
      <ngb-pagination class="mb-0 text-overflow" [maxSize]="4" [rotate]="true" [ellipses]="false" [boundaryLinks]="true"
        [(page)]="page" [pageSize]="pageSize" [collectionSize]="total" (pageChange)="loadNext($event)">
        <ng-template ngbPaginationPrevious>{{ 'BUTTON.PREV' | translate }}</ng-template>
        <ng-template ngbPaginationNext>{{ 'BUTTON.NEXT' | translate }}</ng-template>
      </ngb-pagination>
    </div>
    <div class="paging-total mt-3">
      <span class="h6 fw-bold">{{ total || 0 }}</span> {{ 'PAGING.ITEM_IN' | translate }} <span class="h6 fw-bold">{{
        pages || 0 }}</span> {{ 'PAGING.PAGES' | translate }}
    </div>
  </div>
</div>
